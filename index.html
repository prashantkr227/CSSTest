
<HTML>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

		<link rel="stylesheet" type="text/css" href="https://www-test11.vmware.com/content/dam/digitalmarketing/vmware/en/files/srccode/assets/css/clarity.css">
		
    </head>
    <body>
        <script type='text/javascript' src='https://service.force.com/embeddedservice/4.1/esw.min.js'></script>
        <script type='text/javascript'>
        var initESW = function(gslbBaseURL) {
        embedded_svc.settings.displayHelpButton = true; //Or false
        embedded_svc.settings.language = 'en-US'; //For example, enter 'en' or 'en-US'
        
        embedded_svc.settings.defaultMinimizedText = 'Chat with Support'; //(Defaults to Chat with an Expert)
        embedded_svc.settings.disabledMinimizedText = 'Support Offline'; //(Defaults to Agent Offline)
        
        embedded_svc.settings.loadingText = 'Loading...'; //(Defaults to Loading)
        //embedded_svc.settings.storageDomain = 'yourdomain.com'; //(Sets the domain for your deployment so that visitors can navigate subdomains during a chat session)
        
        // Settings for Live Agent
        embedded_svc.settings.avatarImgURL = '';
        embedded_svc.settings.prechatBackgroundImgURL = '';
        embedded_svc.settings.waitingStateBackgroundImgURL = '';
        embedded_svc.settings.smallCompanyLogoImgURL = '';
        //embedded_svc.settings.directToButtonRouting = function(prechatFormData) {
        // Dynamically changes the button ID based on what the visitor enters in the pre-chat form.
        //Returns a valid button ID.
        //};
        
            embedded_svc.settings.enabledFeatures = ['LiveAgent'];
            embedded_svc.settings.entryFeature = 'LiveAgent';
            //embedded_svc.settings.prepopulatedPrechatFields = {}; //Sets the auto-population of pre-chat form fields

            embedded_svc.settings.widgetWidth = '444px';
            embedded_svc.settings.widgetHeight = '550px';
            
            /*Variable defined for Contact Mail*/
            var mailId = '';
            var contEmail = mailId;
            if(mailId.indexOf("vmware.com")>=0) {
                contEmail = "chat@vmware.com";
            }
            
            /*Variables defined for details to be displayed only in the current detail page*/
            var serviceName = 'VMware Cloud On AWS';
            var caseRecType = 'GSS Technical Support';
            var caseEnt = 'SaaS Production Support';
            var caseProduct = 'VMware Cloud On AWS';
			
            
            /*Variables defined for Case details*/
            var caseOrigin = 'Chat';
            var caseStatus = 'Open';
            var caseSubStatus = 'Assigned';
            var caseDesc = 'Case created from Chat';
            var caseSubj = 'Case created from Chat';
            var caseSupLev = '1';
            var caseProbCat = 'VMware Cloud On AWS';
            var caseSev = 'S2';
            var caseEpBugNo = '12345';
            var caseRecTypeId = '01280000000cYyhAAE';
            var caseProId = '01t4B000001ZFAj';
            var caseEntId = '5504B0000007g1w';
            
            /*Added service name and other details to be displayed in the current detail page*/
            embedded_svc.settings.extraPrechatFormDetails = [
                {"label": "Service Name", "value": serviceName, "displayToAgent": true},
                {"label": "Case Record Type", "value": caseRecType, "displayToAgent": true},
                {"label": "Case Entitlement", "value": caseEnt, "displayToAgent": true},
                {"label": "Case Product", "value": caseProduct, "displayToAgent": true},
                {"label": "Email Id", "value": contEmail, "displayToAgent": true},
                {"label": "Case Origin", "value": caseOrigin, "displayToAgent": true},
                {"label": "Case Status", "value": caseStatus, "displayToAgent": true},
                {"label": "Case Sub Status", "value": caseSubStatus, "displayToAgent": true},
                {"label": "Case Description", "value": caseDesc, "displayToAgent": true},
                {"label": "Case Subject", "value": caseSubj, "displayToAgent": true},
                {"label": "Case Support Level", "value": caseSupLev, "displayToAgent": true},
                {"label": "Case Problem Category", "value": caseProbCat, "displayToAgent": true},
                {"label": "Case Severity", "value": caseSev, "displayToAgent": true},
                {"label": "Case EpbugNo", "value": caseEpBugNo, "displayToAgent": true,"transcriptFields":["Org_Id__c"] },
                {"label": "Case RecordTypeId", "value": caseRecTypeId, "displayToAgent": false},
                {"label": "Case ProductId", "value": caseProId, "displayToAgent": false},
                {"label": "Case EntitlementId", "value": caseEntId, "displayToAgent": false},
			   
            ];
            
            /*Maps the value with Case fields and creates a Case and also links to chat based on whether contact is null, existing or a user*/
            if(contEmail == '' || contEmail == null){
                embedded_svc.settings.extraPrechatInfo = [{
                "entityFieldMaps": [{
                    "doCreate":false,
                    "doFind":true,
                    "fieldName":"Email",
                    "isExactMatch":true,
                    "label":"Email Id"
                  }],
                  "entityName":"Contact",
                  "saveToTranscript": "ContactId",
                  "linkToEntityName": "Case",
                  "linkToEntityField": "ContactId"
                },
                {
                    "entityFieldMaps": [
                        {"doCreate": false,"doFind": false,"fieldName": "ContactEmail","isExactMatch": false,"label": "Email Id"},
                        {"doCreate": true,"doFind": false,"fieldName": "Origin","isExactMatch": false,"label": "Case Origin"},
                        {"doCreate": true,"doFind": false,"fieldName": "Status","isExactMatch": false,"label": "Case Status"},
                        {"doCreate": true,"doFind": false,"fieldName": "Sub_Status__c","isExactMatch": false,"label": "Case Sub Status"},
                        {"doCreate": true,"doFind": false,"fieldName": "Description","isExactMatch": false,"label": "Case Description"},
                        {"doCreate": true,"doFind": false,"fieldName": "Subject","isExactMatch": false,"label": "Case Subject"},
                        {"doCreate": true,"doFind": false,"fieldName": "GSS_Support_Level__c","isExactMatch": false,"label": "Case Support Level"},
                        {"doCreate": true,"doFind": false,"fieldName": "GSS_Problem_Category__c","isExactMatch": false,"label": "Case Problem Category"},
                        {"doCreate": true,"doFind": false,"fieldName": "GSS_Severity__c","isExactMatch": false,"label": "Case Severity"},
                        {"doCreate": true,"doFind": false,"fieldName": "RecordTypeId","isExactMatch": false,"label": "Case RecordTypeId"},
                        {"doCreate": true,"doFind": false,"fieldName": "EntitlementId","isExactMatch": false,"label": "Case EntitlementId"},
                        {"doCreate": true,"doFind": false,"fieldName": "ProductId","isExactMatch": false,"label": "Case ProductId"},
                        {"doCreate": true,"doFind": false,"fieldName": "EP_Bug_No__c","isExactMatch": false,"label": "Case EpbugNo"
                    }],
                    "entityName": "Case",
                    "saveToTranscript": "CaseId",
                    "showOnCreate": true
                }];
            }
            else
            {
                embedded_svc.settings.extraPrechatInfo = [{
                    "entityFieldMaps": [
                        {"doCreate":false, "doFind":true, "fieldName":"Email", "isExactMatch":true, "label":"Email Id"}
                    ],
                    "entityName":"Contact",
                    "saveToTranscript": "ContactId",
                    "linkToEntityName": "Case",
                    "linkToEntityField": "ContactId",
                    "showOnCreate": false
                },
                {
                    "entityFieldMaps": [
                        {"doCreate": false,"doFind": true,"fieldName": "ContactEmail","isExactMatch": true,"label": "Email Id"},
                        {"doCreate": true,"doFind": true,"fieldName": "Origin","isExactMatch": false,"label": "Case Origin"},
                        {"doCreate": true,"doFind": true,"fieldName": "Status","isExactMatch": false,"label": "Case Status"},
                        {"doCreate": true,"doFind": false,"fieldName": "Sub_Status__c","isExactMatch": false,"label": "Case Sub Status"},
                        {"doCreate": true,"doFind": false,"fieldName": "Description","isExactMatch": false,"label": "Case Description"},
                        {"doCreate": true,"doFind": false,"fieldName": "Subject","isExactMatch": false,"label": "Case Subject"},
                        {"doCreate": true,"doFind": false,"fieldName": "GSS_Support_Level__c","isExactMatch": false,"label": "Case Support Level"},
                        {"doCreate": true,"doFind": false,"fieldName": "GSS_Problem_Category__c","isExactMatch": false,"label": "Case Problem Category"},
                        {"doCreate": true,"doFind": false,"fieldName": "GSS_Severity__c","isExactMatch": false,"label": "Case Severity"},
                        {"doCreate": true,"doFind": true,"fieldName": "RecordTypeId","isExactMatch": false,"label": "Case RecordTypeId"},
                        {"doCreate": true,"doFind": false,"fieldName": "EntitlementId","isExactMatch": false,"label": "Case EntitlementId"},
                        {"doCreate": true,"doFind": false,"fieldName": "ProductId","isExactMatch": false,"label": "Case ProductId"},
                        {"doCreate": true,"doFind": false,"fieldName": "EP_Bug_No__c","isExactMatch": false,"label": "Case EpbugNo"
                    }],
                    "entityName": "Case",
                    "saveToTranscript": "CaseId",
                    "showOnCreate": true
                }];
            }


embedded_svc.init('https://vmware--DEV2.cs51.my.salesforce.com', 'https://dev2-vmstarcommunity.cs51.force.com/', gslbBaseURL, '00D4B000000D2NP', 'VMware_Cloud_on_AWS', { baseLiveAgentContentURL: 'https://c.la1-c1cs-phx.salesforceliveagent.com/content', deploymentId: '5724B000000CaSe', buttonId: '5734B000000CaZt', baseLiveAgentURL: 'https://d.la1-c1cs-phx.salesforceliveagent.com/chat', eswLiveAgentDevName: 'EmbeddedServiceLiveAgent_Parent04I4B0000008OIoUAM_1629a5b3d0c'}); };if (!window.embedded_svc) { var s = document.createElement('script'); s.setAttribute('src', 'https://vmware--DEV2.cs51.my.salesforce.com/embeddedservice/4.1/esw.min.js'); s.onload = function() { initESW(null); }; document.body.appendChild(s); } else { initESW('https://service.force.com'); }</script>

    </body>
</HTML>
